<form id="register-form">
  <input type="text" id="firstName" placeholder="First Name" required />
  <input type="text" id="lastName" placeholder="Last Name" required />
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Password" required />
  <input type="text" id="phone" placeholder="Phone" required />
  <button type="submit">Register</button>
</form>

<script>
  document
    .getElementById('register-form')
    .addEventListener('submit', async function (event) {
      event.preventDefault(); // Prevent default form submission

      const firstName = document.getElementById('firstName').value;
      const lastName = document.getElementById('lastName').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const phone = document.getElementById('phone').value;

      // Validate input
      if (!firstName || !lastName || !email || !password || !phone) {
        alert('Please fill in all fields.');
        return;

        // Send POST request to register the user
        const response = await fetch('patients/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            firstName,
            lastName,
            email,
            password,
            phone,
          }),
        });

        // Check if the response body has valid JSON content
        const result = await response.json().catch(() => null);
        if (result) {
          alert('Registration successful!');
          document.getElementById('registerForm').reset(); // Clear the form
        } else {
          alert('Success, but no valid JSON returned.');
        }
      }
    });
</script>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form id="registerForm">
      <div class="form-group">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required />
      </div>

      <div class="form-group">
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required />
      </div>

      <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
      </div>

      <div class="form-group">
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required />
      </div>

      <div class="form-group">
        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" name="phone" required />
      </div>

      <button type="submit">Register</button>

      <!-- Area to display success or error messages -->
      <div id="feedbackMessage"></div>
    </form>

    <script>
      // document.getElementById('form').addEventListener('submit', async (e) => {
      e.preventDefault();

      // });
    </script>

    <script>
      // Assuming you have an HTML form with an ID 'registerForm'
      // Event listener for the form submission
      document
        .getElementById('registerForm')
        .addEventListener('submit', async function (event) {
          // Prevent the default form submission behavior
          event.preventDefault();

          // Collect user input from the form fields
          const formData = {
            firstName: document.getElementById('firstName').value.trim(),
            lastName: document.getElementById('lastName').value.trim(),
            email: document.getElementById('email').value.trim(),
            password: document.getElementById('password').value.trim(),
            phone: document.getElementById('phone').value.trim(), // Added phone field
          };

          // Validate input data
          if (
            !formData.firstName ||
            !formData.lastName ||
            !formData.email ||
            !formData.password ||
            !formData.phone
          ) {
            alert('Please fill in all required fields.');
            return;
          }

          // Send the form data to the server using a POST request
          try {
            const response = await fetch('/patients/register', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData),
            });

            // Handle the server response
            if (response.ok) {
              // Registration was successful
              const result = await response.json();
              alert('Registration successful!');
              console.log(result);
              // Redirect to a success page or perform other actions
            } else {
              // Registration failed
              const errorData = await response.json();
              alert(`Failed to register: ${errorData.message}`);
            }
          } catch (error) {
            // Handle unexpected errors
            console.error('An unexpected error occurred:', error);
            alert('An unexpected error occurred. Please try again.');
          }
        });
    </script>
  </body>
</html>
